/* stormtrooper pixel map Scott Weaver 2020 - MIT License */ 
var trooper = {"19,1":1,"20,1":1,"21,1":1,"22,1":1,"23,1":1,"24,1":1,"25,1":1,"26,1":1,"27,1":1,"28,1":1,"17,2":1,"18,2":1,"19,2":1,"20,2":4,"21,2":0,"22,2":0,"23,2":0,"24,2":0,"25,2":0,"26,2":0,"27,2":0,"28,2":0,"15,3":1,"16,3":1,"17,3":1,"18,3":0,"19,3":0,"20,3":4,"21,3":4,"22,3":4,"23,3":0,"24,3":0,"25,3":0,"26,3":0,"27,3":0,"28,3":0,"14,4":1,"15,4":1,"16,4":1,"17,4":4,"18,4":0,"19,4":0,"20,4":0,"21,4":0,"22,4":0,"23,4":4,"24,4":4,"25,4":0,"26,4":0,"27,4":0,"28,4":0,"13,5":1,"14,5":0,"15,5":0,"16,5":0,"17,5":4,"18,5":4,"19,5":4,"20,5":4,"21,5":0,"22,5":0,"23,5":0,"24,5":4,"25,5":4,"26,5":0,"27,5":0,"28,5":0,"12,6":1,"13,6":0,"14,6":0,"15,6":0,"16,6":0,"17,6":0,"18,6":0,"19,6":0,"20,6":4,"21,6":4,"22,6":0,"23,6":0,"24,6":0,"25,6":4,"26,6":4,"27,6":0,"28,6":0,"11,7":1,"12,7":0,"13,7":0,"14,7":0,"15,7":0,"16,7":0,"17,7":0,"18,7":0,"19,7":0,"20,7":0,"21,7":4,"22,7":4,"23,7":4,"24,7":0,"25,7":0,"26,7":4,"27,7":0,"28,7":0,"10,8":1,"11,8":1,"12,8":0,"13,8":0,"14,8":0,"15,8":0,"16,8":0,"17,8":0,"18,8":0,"19,8":0,"20,8":0,"21,8":0,"22,8":0,"23,8":4,"24,8":4,"25,8":0,"26,8":4,"27,8":4,"28,8":0,"10,9":1,"11,9":0,"12,9":0,"13,9":0,"14,9":0,"15,9":0,"16,9":0,"17,9":0,"18,9":0,"19,9":0,"20,9":0,"21,9":0,"22,9":0,"23,9":0,"24,9":4,"25,9":0,"26,9":0,"27,9":4,"28,9":0,"9,10":1,"10,10":1,"11,10":0,"12,10":0,"13,10":0,"14,10":0,"15,10":0,"16,10":0,"17,10":0,"18,10":0,"19,10":0,"20,10":0,"21,10":0,"22,10":0,"23,10":0,"24,10":4,"25,10":0,"26,10":0,"27,10":4,"28,10":0,"9,11":1,"10,11":1,"11,11":0,"12,11":0,"13,11":0,"14,11":0,"15,11":0,"16,11":0,"17,11":0,"18,11":0,"19,11":0,"20,11":0,"21,11":0,"22,11":0,"23,11":0,"24,11":4,"25,11":0,"26,11":0,"27,11":4,"28,11":0,"9,12":1,"10,12":0,"11,12":0,"12,12":0,"13,12":0,"14,12":0,"15,12":0,"16,12":0,"17,12":0,"18,12":0,"19,12":0,"20,12":0,"21,12":0,"22,12":0,"23,12":0,"24,12":4,"25,12":0,"26,12":0,"27,12":4,"28,12":0,"8,13":1,"9,13":1,"10,13":0,"11,13":0,"12,13":0,"13,13":0,"14,13":0,"15,13":0,"16,13":0,"17,13":0,"18,13":0,"19,13":0,"20,13":0,"21,13":0,"22,13":0,"23,13":0,"24,13":4,"25,13":0,"26,13":0,"27,13":4,"28,13":0,"8,14":1,"9,14":1,"10,14":0,"11,14":0,"12,14":0,"13,14":0,"14,14":0,"15,14":0,"16,14":0,"17,14":0,"18,14":0,"19,14":0,"20,14":0,"21,14":0,"22,14":0,"23,14":0,"24,14":4,"25,14":0,"26,14":0,"27,14":4,"28,14":0,"8,15":1,"9,15":1,"10,15":0,"11,15":0,"12,15":0,"13,15":0,"14,15":0,"15,15":0,"16,15":0,"17,15":0,"18,15":0,"19,15":0,"20,15":0,"21,15":0,"22,15":0,"23,15":0,"24,15":4,"25,15":0,"26,15":0,"27,15":4,"28,15":0,"8,16":1,"9,16":1,"10,16":0,"11,16":0,"12,16":0,"13,16":0,"14,16":0,"15,16":0,"16,16":0,"17,16":0,"18,16":0,"19,16":0,"20,16":0,"21,16":0,"22,16":0,"23,16":0,"24,16":4,"25,16":0,"26,16":0,"27,16":4,"28,16":0,"8,17":1,"9,17":1,"10,17":0,"11,17":0,"12,17":0,"13,17":0,"14,17":1,"15,17":1,"16,17":1,"17,17":1,"18,17":1,"19,17":1,"20,17":1,"21,17":1,"22,17":1,"23,17":1,"24,17":1,"25,17":1,"26,17":1,"27,17":1,"28,17":1,"8,18":1,"9,18":1,"10,18":1,"11,18":2,"12,18":2,"13,18":2,"14,18":2,"15,18":2,"16,18":2,"17,18":2,"18,18":2,"19,18":2,"20,18":2,"21,18":2,"22,18":2,"23,18":2,"24,18":2,"25,18":2,"26,18":2,"27,18":2,"28,18":2,"7,19":1,"8,19":2,"9,19":2,"10,19":2,"11,19":2,"12,19":2,"13,19":2,"14,19":2,"15,19":2,"16,19":2,"17,19":2,"18,19":2,"19,19":2,"20,19":2,"21,19":2,"22,19":2,"23,19":2,"24,19":2,"25,19":2,"26,19":2,"27,19":2,"28,19":2,"7,20":1,"8,20":2,"9,20":2,"10,20":2,"11,20":2,"12,20":2,"13,20":2,"14,20":2,"15,20":2,"16,20":2,"17,20":2,"18,20":2,"19,20":2,"20,20":2,"21,20":2,"22,20":2,"23,20":1,"24,20":1,"25,20":1,"26,20":1,"27,20":1,"28,20":1,"7,21":1,"8,21":2,"9,21":2,"10,21":1,"11,21":1,"12,21":1,"13,21":1,"14,21":1,"15,21":1,"16,21":1,"17,21":1,"18,21":1,"19,21":1,"20,21":1,"21,21":1,"22,21":1,"23,21":1,"24,21":1,"25,21":1,"26,21":1,"27,21":1,"28,21":1,"7,22":1,"8,22":1,"9,22":1,"10,22":1,"11,22":1,"12,22":1,"13,22":3,"14,22":3,"15,22":3,"16,22":3,"17,22":3,"18,22":3,"19,22":3,"20,22":3,"21,22":3,"22,22":3,"23,22":3,"24,22":3,"25,22":1,"26,22":0,"27,22":0,"28,22":0,"6,23":1,"7,23":1,"8,23":1,"9,23":1,"10,23":1,"11,23":1,"12,23":1,"13,23":3,"14,23":3,"15,23":3,"16,23":3,"17,23":3,"18,23":3,"19,23":3,"20,23":3,"21,23":3,"22,23":3,"23,23":3,"24,23":1,"25,23":0,"26,23":0,"27,23":0,"28,23":0,"6,24":1,"7,24":0,"8,24":1,"9,24":1,"10,24":1,"11,24":0,"12,24":1,"13,24":3,"14,24":3,"15,24":3,"16,24":3,"17,24":3,"18,24":3,"19,24":3,"20,24":3,"21,24":3,"22,24":3,"23,24":1,"24,24":0,"25,24":0,"26,24":0,"27,24":0,"28,24":0,"5,25":1,"6,25":1,"7,25":0,"8,25":0,"9,25":1,"10,25":1,"11,25":0,"12,25":0,"13,25":3,"14,25":3,"15,25":3,"16,25":3,"17,25":3,"18,25":3,"19,25":3,"20,25":3,"21,25":3,"22,25":1,"23,25":0,"24,25":0,"25,25":0,"26,25":0,"27,25":0,"28,25":0,"5,26":1,"6,26":1,"7,26":0,"8,26":0,"9,26":1,"10,26":1,"11,26":0,"12,26":0,"13,26":1,"14,26":3,"15,26":3,"16,26":3,"17,26":3,"18,26":3,"19,26":3,"20,26":1,"21,26":0,"22,26":0,"23,26":0,"24,26":0,"25,26":0,"26,26":0,"27,26":0,"28,26":0,"4,27":2,"5,27":2,"6,27":0,"7,27":0,"8,27":0,"9,27":0,"10,27":0,"11,27":1,"12,27":0,"13,27":1,"14,27":3,"15,27":3,"16,27":3,"17,27":3,"18,27":1,"19,27":0,"20,27":0,"21,27":0,"22,27":0,"23,27":0,"24,27":0,"25,27":0,"26,27":0,"27,27":0,"28,27":0,"4,28":2,"5,28":2,"6,28":0,"7,28":0,"8,28":0,"9,28":0,"10,28":1,"11,28":2,"12,28":0,"13,28":0,"14,28":1,"15,28":3,"16,28":1,"17,28":0,"18,28":0,"19,28":0,"20,28":0,"21,28":0,"22,28":0,"23,28":0,"24,28":0,"25,28":0,"26,28":0,"27,28":0,"28,28":0,"4,29":2,"5,29":2,"6,29":0,"7,29":0,"8,29":0,"9,29":0,"10,29":1,"11,29":2,"12,29":0,"13,29":0,"14,29":0,"15,29":0,"16,29":0,"17,29":0,"18,29":0,"19,29":0,"20,29":0,"21,29":0,"22,29":0,"23,29":0,"24,29":0,"25,29":0,"26,29":0,"27,29":0,"28,29":0,"5,30":2,"6,30":0,"7,30":0,"8,30":1,"9,30":0,"10,30":1,"11,30":2,"12,30":1,"13,30":0,"14,30":0,"15,30":0,"16,30":0,"17,30":0,"18,30":1,"19,30":1,"20,30":0,"21,30":0,"22,30":0,"23,30":0,"24,30":0,"25,30":0,"26,30":0,"27,30":0,"28,30":0,"5,31":1,"6,31":0,"7,31":0,"8,31":1,"9,31":0,"10,31":1,"11,31":2,"12,31":2,"13,31":0,"14,31":1,"15,31":1,"16,31":1,"17,31":1,"18,31":0,"19,31":0,"20,31":0,"21,31":0,"22,31":0,"23,31":0,"24,31":0,"25,31":0,"26,31":0,"27,31":0,"28,31":0,"5,32":1,"6,32":0,"7,32":0,"8,32":1,"9,32":0,"10,32":1,"11,32":2,"12,32":2,"13,32":2,"14,32":1,"15,32":1,"16,32":0,"17,32":0,"18,32":0,"19,32":0,"20,32":0,"21,32":0,"22,32":0,"23,32":0,"24,32":0,"25,32":0,"26,32":0,"27,32":0,"28,32":0,"5,33":1,"6,33":0,"7,33":0,"8,33":1,"9,33":0,"10,33":1,"11,33":2,"12,33":2,"13,33":0,"14,33":0,"15,33":0,"16,33":0,"17,33":0,"18,33":0,"19,33":0,"20,33":0,"21,33":0,"22,33":0,"23,33":0,"24,33":0,"25,33":0,"26,33":0,"27,33":0,"28,33":0,"4,34":1,"5,34":1,"6,34":0,"7,34":0,"8,34":1,"9,34":1,"10,34":0,"11,34":2,"12,34":2,"13,34":0,"14,34":0,"15,34":0,"16,34":0,"17,34":0,"18,34":0,"19,34":0,"20,34":0,"21,34":0,"22,34":0,"23,34":0,"24,34":0,"25,34":0,"26,34":0,"27,34":0,"28,34":1,"3,35":0,"4,35":1,"5,35":1,"6,35":1,"7,35":0,"8,35":1,"9,35":1,"10,35":0,"11,35":1,"12,35":1,"13,35":0,"14,35":0,"15,35":0,"16,35":0,"17,35":0,"18,35":0,"19,35":0,"20,35":0,"21,35":0,"22,35":0,"23,35":0,"24,35":0,"25,35":0,"26,35":1,"27,35":1,"28,35":2,"2,36":0,"3,36":0,"4,36":0,"5,36":0,"6,36":0,"7,36":0,"8,36":1,"9,36":1,"10,36":1,"11,36":0,"12,36":1,"13,36":0,"14,36":0,"15,36":0,"16,36":0,"17,36":0,"18,36":0,"19,36":0,"20,36":0,"21,36":0,"22,36":0,"23,36":0,"24,36":1,"25,36":2,"26,36":2,"27,36":2,"28,36":2,"2,37":0,"3,37":0,"4,37":0,"5,37":0,"6,37":0,"7,37":0,"8,37":0,"9,37":0,"10,37":1,"11,37":1,"12,37":1,"13,37":0,"14,37":0,"15,37":0,"16,37":0,"17,37":0,"18,37":0,"19,37":0,"20,37":0,"21,37":0,"22,37":0,"23,37":0,"24,37":2,"25,37":2,"26,37":1,"27,37":1,"28,37":1,"1,38":0,"2,38":0,"3,38":0,"4,38":0,"5,38":1,"6,38":1,"7,38":1,"8,38":0,"9,38":0,"10,38":0,"11,38":1,"12,38":1,"13,38":1,"14,38":0,"15,38":0,"16,38":0,"17,38":0,"18,38":0,"19,38":0,"20,38":0,"21,38":0,"22,38":1,"23,38":2,"24,38":2,"25,38":0,"26,38":0,"27,38":0,"28,38":0,"1,39":0,"2,39":0,"3,39":0,"4,39":1,"5,39":2,"6,39":2,"7,39":2,"8,39":1,"9,39":0,"10,39":0,"11,39":0,"12,39":1,"13,39":1,"14,39":0,"15,39":0,"16,39":0,"17,39":0,"18,39":0,"19,39":0,"20,39":0,"21,39":1,"22,39":2,"23,39":1,"24,39":0,"25,39":0,"26,39":0,"27,39":0,"28,39":0,"1,40":0,"2,40":0,"3,40":0,"4,40":1,"5,40":1,"6,40":2,"7,40":2,"8,40":2,"9,40":1,"10,40":0,"11,40":0,"12,40":0,"13,40":1,"14,40":0,"15,40":0,"16,40":0,"17,40":0,"18,40":0,"19,40":0,"20,40":2,"21,40":2,"22,40":0,"23,40":0,"24,40":0,"25,40":0,"26,40":0,"27,40":0,"28,40":0,"1,41":0,"2,41":0,"3,41":1,"4,41":0,"5,41":1,"6,41":2,"7,41":2,"8,41":2,"9,41":1,"10,41":0,"11,41":0,"12,41":0,"13,41":1,"14,41":1,"15,41":0,"16,41":0,"17,41":0,"18,41":1,"19,41":2,"20,41":1,"21,41":0,"22,41":0,"23,41":0,"24,41":0,"25,41":0,"26,41":0,"27,41":0,"28,41":0,"1,42":0,"2,42":1,"3,42":0,"4,42":0,"5,42":0,"6,42":1,"7,42":2,"8,42":2,"9,42":2,"10,42":1,"11,42":0,"12,42":0,"13,42":0,"14,42":1,"15,42":0,"16,42":0,"17,42":0,"18,42":0,"19,42":0,"20,42":0,"21,42":0,"22,42":0,"23,42":0,"24,42":0,"25,42":0,"26,42":0,"27,42":0,"28,42":0,"1,43":0,"2,43":1,"3,43":1,"4,43":0,"5,43":0,"6,43":0,"7,43":1,"8,43":2,"9,43":2,"10,43":2,"11,43":1,"12,43":0,"13,43":0,"14,43":1,"15,43":0,"16,43":0,"17,43":0,"18,43":0,"19,43":0,"20,43":0,"21,43":0,"22,43":0,"23,43":0,"24,43":0,"25,43":0,"26,43":0,"27,43":0,"28,43":0,"1,44":0,"2,44":1,"3,44":1,"4,44":0,"5,44":0,"6,44":0,"7,44":0,"8,44":1,"9,44":2,"10,44":1,"11,44":0,"12,44":0,"13,44":0,"14,44":0,"15,44":0,"16,44":0,"17,44":0,"18,44":0,"19,44":0,"20,44":0,"21,44":0,"22,44":0,"23,44":0,"24,44":0,"25,44":0,"26,44":0,"27,44":0,"28,44":0,"1,45":0,"2,45":1,"3,45":1,"4,45":1,"5,45":0,"6,45":0,"7,45":0,"8,45":0,"9,45":1,"10,45":0,"11,45":0,"12,45":0,"13,45":0,"14,45":0,"15,45":0,"16,45":0,"17,45":0,"18,45":0,"19,45":0,"20,45":0,"21,45":0,"22,45":0,"23,45":0,"24,45":0,"25,45":0,"26,45":0,"27,45":0,"28,45":0,"2,46":1,"3,46":2,"4,46":1,"5,46":0,"6,46":0,"7,46":0,"8,46":0,"9,46":0,"10,46":0,"11,46":0,"12,46":0,"13,46":0,"14,46":0,"15,46":0,"16,46":0,"17,46":0,"18,46":0,"19,46":0,"20,46":0,"21,46":0,"22,46":0,"23,46":0,"24,46":0,"25,46":0,"26,46":0,"27,46":1,"28,46":1,"3,47":1,"4,47":2,"5,47":1,"6,47":0,"7,47":0,"8,47":0,"9,47":0,"10,47":0,"11,47":0,"12,47":0,"13,47":0,"14,47":0,"15,47":0,"16,47":0,"17,47":0,"18,47":0,"19,47":0,"20,47":0,"21,47":0,"22,47":0,"23,47":0,"24,47":0,"25,47":1,"26,47":0,"27,47":1,"28,47":1,"4,48":2,"5,48":2,"6,48":1,"7,48":0,"8,48":0,"9,48":0,"10,48":0,"11,48":0,"12,48":0,"13,48":0,"14,48":0,"15,48":0,"16,48":0,"17,48":0,"18,48":0,"19,48":0,"20,48":0,"21,48":0,"22,48":0,"23,48":0,"24,48":0,"25,48":0,"26,48":0,"27,48":2,"28,48":2,"4,49":1,"5,49":2,"6,49":1,"7,49":0,"8,49":0,"9,49":0,"10,49":0,"11,49":0,"12,49":0,"13,49":0,"14,49":0,"15,49":0,"16,49":0,"17,49":0,"18,49":0,"19,49":0,"20,49":0,"21,49":0,"22,49":0,"23,49":0,"24,49":0,"25,49":0,"26,49":1,"27,49":2,"28,49":2,"5,50":1,"6,50":1,"7,50":0,"8,50":0,"9,50":0,"10,50":0,"11,50":0,"12,50":0,"13,50":0,"14,50":0,"15,50":0,"16,50":0,"17,50":0,"18,50":0,"19,50":0,"20,50":0,"21,50":0,"22,50":0,"23,50":0,"24,50":0,"25,50":0,"26,50":2,"27,50":2,"28,50":2,"6,51":1,"7,51":0,"8,51":0,"9,51":0,"10,51":0,"11,51":0,"12,51":0,"13,51":0,"14,51":0,"15,51":0,"16,51":0,"17,51":0,"18,51":0,"19,51":0,"20,51":0,"21,51":0,"22,51":0,"23,51":0,"24,51":0,"25,51":1,"26,51":2,"27,51":2,"28,51":2,"6,52":1,"7,52":0,"8,52":0,"9,52":0,"10,52":0,"11,52":0,"12,52":0,"13,52":0,"14,52":0,"15,52":0,"16,52":0,"17,52":1,"18,52":1,"19,52":0,"20,52":0,"21,52":0,"22,52":0,"23,52":0,"24,52":0,"25,52":1,"26,52":2,"27,52":2,"28,52":2,"6,53":1,"7,53":0,"8,53":0,"9,53":0,"10,53":0,"11,53":0,"12,53":0,"13,53":0,"14,53":0,"15,53":0,"16,53":1,"17,53":2,"18,53":2,"19,53":2,"20,53":1,"21,53":0,"22,53":1,"23,53":1,"24,53":1,"25,53":2,"26,53":2,"27,53":2,"28,53":2,"6,54":1,"7,54":0,"8,54":0,"9,54":0,"10,54":0,"11,54":0,"12,54":0,"13,54":0,"14,54":0,"15,54":0,"16,54":1,"17,54":2,"18,54":2,"19,54":2,"20,54":2,"21,54":1,"22,54":1,"23,54":1,"24,54":2,"25,54":2,"26,54":2,"27,54":2,"28,54":2,"7,55":1,"8,55":0,"9,55":0,"10,55":0,"11,55":0,"12,55":0,"13,55":0,"14,55":0,"15,55":0,"16,55":1,"17,55":2,"18,55":1,"19,55":1,"20,55":2,"21,55":1,"22,55":1,"23,55":1,"24,55":2,"25,55":2,"26,55":2,"27,55":2,"28,55":2,"7,56":1,"8,56":1,"9,56":1,"10,56":0,"11,56":0,"12,56":0,"13,56":0,"14,56":0,"15,56":0,"16,56":0,"17,56":2,"18,56":1,"19,56":1,"20,56":2,"21,56":1,"22,56":1,"23,56":1,"24,56":2,"25,56":2,"26,56":2,"27,56":2,"28,56":2,"8,57":1,"9,57":1,"10,57":1,"11,57":0,"12,57":0,"13,57":0,"14,57":0,"15,57":0,"16,57":0,"17,57":1,"18,57":2,"19,57":2,"20,57":1,"21,57":1,"22,57":0,"23,57":0,"24,57":1,"25,57":2,"26,57":2,"27,57":2,"28,57":2,"9,58":1,"10,58":1,"11,58":1,"12,58":1,"13,58":0,"14,58":0,"15,58":0,"16,58":0,"17,58":1,"18,58":1,"19,58":1,"20,58":1,"21,58":0,"22,58":0,"23,58":0,"24,58":0,"25,58":1,"26,58":2,"27,58":2,"28,58":2,"10,59":1,"11,59":1,"12,59":1,"13,59":1,"14,59":0,"15,59":0,"16,59":0,"17,59":0,"18,59":0,"19,59":0,"20,59":0,"21,59":0,"22,59":0,"23,59":0,"24,59":0,"25,59":1,"26,59":1,"27,59":1,"28,59":1,"12,60":1,"13,60":1,"14,60":1,"15,60":1,"16,60":0,"17,60":0,"18,60":0,"19,60":0,"20,60":0,"21,60":0,"22,60":1,"23,60":1,"24,60":1,"25,60":1,"14,61":1,"15,61":1,"16,61":1,"17,61":1,"18,61":1,"19,61":1,"20,61":1,"21,61":1,"22,61":1,"23,61":1,"24,61":1,}
var body = document.querySelector("body")
//body.onresize = main
c.onclick = main
document.querySelector("#fontSize").addEventListener("change", function(ev){
  pSize = ev.target.value
  main()
})
main()

async function main() {

  /*INIT*/
  x = c.getContext`2d`;  
  x.clearRect(0, 0, c.width, c.height);
  var pSize = document.querySelector("#fontSize").value
  let constRed = chance(.05)
  let constBlue = chance(.05)
  let constGreen = chance(.05)
  let lineWidth = rand(fontSize.value*1/2)
  let circles = chance(.2);
  let allowStroke = chance()
  let alwaysStroke = chance(.25)
  let r=255;
  let g=255
  let b=255;
  let map = [];
  let actual = ["#ebebeb", "#b1b1b1", "#21211f", "#0c2913"]
  let randColor = ()=> `rgb(${constRed?0:rand(r)},${constGreen?0:rand(g)},${constBlue?0:rand(b)})`
  map[0] = randColor();
  map[1] = randColor();
  map[2] = randColor();
  map[3] = randColor();
  map[4] = chance(.5) ? pick(map) : map[0]; //tiger stripes

  if(Math.random()>.75) map = actual;
  let strokeColor = pick(map);
  let strokeSeed = pick([0,1,2,3,4,5]);
  let strokeOnPass = pick([0,1])
  /*calculate dimensions*/
  const W = 29;
  const H = 62;
  c.width = W * 2 * fontSize.value
  c.height = H * fontSize.value 
  const bg = pick(["black", "white", ...map]);
  body.style.backgroundColor = bg;
  x.fillStyle = bg;
  x.fillRect(0, 0, c.width, c.height);
  /*DRAW PHASE*/
  for(pass = 0; pass<2; pass++)    // 2 passes stroke abd fill
    for(j = W*H; j--;) {    
      //await delay(0)
      drawPixel()
    }
  function drawPixel(){
    Y = Math.floor(j/(W)), X = Math.floor(j%(W));

    let xPos = (pSize)*(X) 
    let yPos = (pSize)*(Y)
    let X2 = W*2 -X -1;
    let xPos2 = (pSize)*X2;
    if(
      trooper[X+","+Y]!=undefined
    ) {  
      let seed = trooper[X+","+Y];
      x.fillStyle = map[seed];
      x.strokeStyle = strokeColor;
      x.lineWidth = lineWidth
      if(circles){
        x.beginPath()
        x.arc(xPos,yPos,pSize/2.1,0, 2 * Math.PI);
        x.arc(xPos2,yPos,pSize/2.1,0, 2 * Math.PI);//right side
        x.fill()
      } else {
        x[(pass==strokeOnPass&&(allowStroke&&(seed==strokeSeed||alwaysStroke))) ? 'strokeRect' : 'fillRect'](xPos,yPos,pSize,pSize);
        x[(pass==strokeOnPass&&(allowStroke&&(seed==strokeSeed||alwaysStroke))) ? 'strokeRect' : 'fillRect'](xPos2,yPos,pSize,pSize);//right side
      }
    }
  }
}

function rand(max){ 
  return Math.floor(Math.random()*max+1)
}
function pick(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}
const RATE = 100
let lastStamp
function step(timestamp) {
  if (lastStamp === undefined) lastStamp = timestamp;
  if(timestamp > lastStamp + RATE) {
    lastStamp = timestamp;    
    main()
  }
  window.requestAnimationFrame(step);
}

async function delay(ms){
  return new Promise(res=>setTimeout(res, ms))
}
function chance(prob=.5){
  return Math.random()<prob
}
//window.requestAnimationFrame(step);

